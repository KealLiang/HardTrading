# "默默上涨"功能说明

## 功能概述

在 `fupan.py` 中新增了"默默上涨"复盘功能，用于筛选符合特定条件的股票。

## 查询条件

- **30天涨幅大于等于55%**
- **30天无涨停**
- **非ST股票**
- **非近新股**

## 功能特点

### 1. 数据特性
- **不能查历史数据**：此查询只能获取当前数据，无法指定历史日期
- **实时性强**：反映当前市场中符合条件的股票

### 2. 时间逻辑
- **0点~9点30或非交易日**：使用前一个交易日日期
- **9点30后且是交易日**：使用当前交易日日期

### 3. 数据格式
- 与其他复盘数据格式保持一致
- 单元格内容用分号（`;`）分隔
- 包含：股票代码、股票简称、最新价、最新涨跌幅、区间涨跌幅、区间成交额、区间振幅

### 4. 存储位置
- 保存到 `./excel/fupan_stocks.xlsx` 的"默默上涨"sheet
- 不区分主板/非主板，统一保存所有符合条件的股票

## 使用方法

### 方法1：单独查询数据

```python
from fetch.tonghuashun.fupan import get_silently_increase_stocks

# 查询默默上涨数据（不区分主板/非主板）
df = get_silently_increase_stocks()
```

### 方法2：保存到Excel

```python
from fetch.tonghuashun.fupan import daily_fupan

# 保存默默上涨数据
daily_fupan('默默上涨', None, None, "", "../excel/fupan_stocks.xlsx")
```

### 方法3：集成到完整复盘
```python
from fetch.tonghuashun.fupan import all_fupan

# 运行所有复盘类型（包括默默上涨）
all_fupan(start_date='20250905', types=['all'])  # 主板配置（包含默默上涨）
all_fupan(start_date='20250905', types=['else'])  # 非主板配置（不包含默默上涨）
```

## 数据示例

Excel中保存的数据格式：
```
股票代码; 股票简称; 最新价; 最新涨跌幅; 区间涨跌幅; 区间成交额; 区间振幅
300308.SZ; 中际旭创; 407; 10.3%; 119.7%; 4277.89亿; 142.4%
300502.SZ; 新易盛; 349.25; 11.9%; 101.9%; 4488.45亿; 133.5%
```

## 技术实现

### 新增函数
1. `get_momo_shangzhang_stocks(board_suffix="")` - 查询默默上涨数据
2. `get_current_trading_date()` - 获取当前应使用的交易日期

### 修改函数
1. `daily_fupan()` - 添加对"默默上涨"类型的特殊处理
2. `all_fupan()` - 在复盘类型列表中添加"默默上涨"

### 数据处理
- 自动识别返回数据的列名（因为日期会动态变化）
- 格式化涨跌幅为百分比
- 格式化成交额为亿元单位
- 按区间涨跌幅降序排列

## 注意事项

1. **网络依赖**：需要访问同花顺数据接口
2. **Cookie配置**：确保 `config.ths_cookie` 配置正确
3. **数据更新**：每次运行都会获取最新数据
4. **重复运行**：同一日期的数据会被跳过，避免重复保存

## 运行示例

可以运行 `example_momo_shangzhang.py` 查看完整的使用示例。
